/*! angular-datetime Copyright Vokal 2015 */
!function(a,b){"function"==typeof define&&define.amd?define("angular-time-picker",[],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){angular.module("vokal.timePicker",[]).directive("timePicker",["$compile","$filter","$document","$timeout",function(a,b,c,d){"use strict";function e(a){return!!a&&angular.isString(a)&&!isNaN(new Date(i+a).getTime())}function f(a){return!!a&&angular.isFunction(a.getTime)&&!isNaN(a.getTime())}function g(a){return f(a)?a:new Date(a)}var h="h:mm a",i="1/1/1990 ";return{restrict:"A",scope:{},require:"ngModel",link:function(j,k,l,m){function n(a){return"string"===l.pickerType?b("date")(a,l.timePicker||h):a}function o(a){return new Date(r.toDateString()+" "+a)}function p(){j.showTimepicker||(j.showTimepicker=!0,d(function(){c.on("click touchstart",z)},100))}function q(){c.off("click touchstart",z),j.showTimepicker=!1}var r=new Date((new Date).toDateString());m.$parsers.unshift(function(a){var b=!a,c=e(a);return m.$setValidity("time",b||c),c&&(r=o(a)),n(r)}),m.$formatters.push(function(a){var c=!a,d=g(a),e=f(d);return m.$setValidity("time",c||e),e&&(r=angular.copy(d)),e?b("date")(d,l.timePicker||h):a}),j.times=[],j.showTimepicker=!1;for(var s,t,u,v=l.pickerInterval?parseInt(l.pickerInterval,10):60,w=0;24>w;w++)for(var x=0;60>x;x+=v)t=10>x?"0"+x:x,s=new Date(i+w+":"+t),u=b("date")(s,l.timePicker||h),j.times.push(u);j.applyTime=function(a){m.$setViewValue(a),m.$render(),q()};var y=angular.element('<ol class="time-picker" data-ng-show="showTimepicker"><li data-ng-repeat="time in times" data-ng-click="applyTime( time )">{{ time }}</li></ol>');a(y)(j),k.after(y),k.on("click",p),k.on("keydown paste",q),j.$on("$destroy",q);var z=function(a){y[0].contains(a.target)||j.$apply(q)}}}}])});