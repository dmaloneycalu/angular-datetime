/*! angular-datetime Copyright Vokal 2016 */
!function(a,b){"function"==typeof define&&define.amd?define("angular-time-picker",[],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){angular.module("vokal.timePicker",[]).directive("timePicker",["$compile","$filter","$document","$timeout",function(a,b,c,d){"use strict";function e(a){return!!a&&moment(new Date(h+a)).isValid()}function f(a){return!!a&&moment(new Date(a)).isValid()}var g="h:mm a",h="1/1/1990 ";return{restrict:"A",scope:{model:"=ngModel",timezone:"="},require:"ngModel",link:function(b,i,j,k){function l(){return"string"===j.pickerType?m(s):s.toDate()}function m(a){return a.format(j.timePicker||g)}function n(a){s=moment(a),p()}function o(a,b){s.set({hour:a,minute:b})}function p(a){j.timezone&&angular.isFunction(s.tz)&&s.tz(a||moment.tz.guess())}function q(){b.showTimepicker||(b.showTimepicker=!0,d(function(){c.on("click touchstart",z)},100))}function r(){c.off("click touchstart",z),b.showTimepicker=!1}var s=moment();p(b.timezone),j.timezone&&!moment.tz&&console.warn("Trying to use timezones without including moment-timezone."),j.timezone&&b.$watch("timezone",function(a,c){a!==c&&(p(a),b.model&&(b.model=l()))}),k.$parsers.unshift(function(a){var b=!a,c=e(a);if(k.$setValidity("time",b||c),c){var d=moment(new Date(h+a));o(d.hours(),d.minutes())}return l()}),k.$formatters.push(function(a){var b=!a,c=f(a),d=c||e(a);return k.$setValidity("time",b||c||d),d?(n(new Date(c?a:h+a)),m(s)):a}),b.times=[],b.showTimepicker=!1;for(var t,u,v=j.pickerInterval?parseInt(j.pickerInterval,10):60,w=0;24>w;w++)for(var x=0;60>x;x+=v)u=10>x?"0"+x:x,t=new Date(h+w+":"+u),b.times.push({display:m(moment(t)),hours:w,minutes:x});b.applyTime=function(a){o(a.hours,a.minutes),b.model=l(),k.$setDirty(),r()};var y=angular.element('<ol class="time-picker" data-ng-show="showTimepicker"><li data-ng-repeat="time in times" data-ng-click="applyTime( time )">{{ time.display }}</li></ol>');a(y)(b),i.after(y),i.on("click",q),i.on("keydown paste",r),b.$on("$destroy",r);var z=function(a){y[0].contains(a.target)||b.$apply(r)}}}}])});